<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- GROUPS -->
    <record id="loan_management.group_loan_management_user" model="res.groups">
        <field name="name">Loan HR User</field>
    </record>

    <record id="loan_management.group_loan_management_manager" model="res.groups">
        <field name="name">Loan HR Config Manager</field>
    </record>

    <record id="loan_management.group_loan_management_loan_edit" model="res.groups">
        <field name="name">Loan HR Edit</field>
    </record>

    <record id="loan_management.group_request_loan_employee" model="res.groups">
        <field name="name">Loan Request Employee</field>
        <!--        <field name="category_id" ref="base.module_category_hr"/>-->
    </record>

    <record id="loan_management.group_request_loan_manager" model="res.groups">
        <field name="name">Loan Request Manager</field>
        <!--        <field name="category_id" ref="base.module_category_hr"/>-->
    </record>

    <!-- GROUPS -->

    <!-- RULES -->
    <record id="loan_management.loan_rule_user_own" model="ir.rule">
        <field name="name">Loan: Own Records</field>
        <field name="model_id" ref="model_hr_loan"/>
        <field name="groups" eval="[(4, ref('loan_management.group_loan_management_user'))]"/>
        <field name="domain_force">[('create_uid', '=', user.id)]</field>
    </record>

    <!-- Rule for managers/admins: can see all records -->
    <record id="loan_management.loan_rule_manager_all" model="ir.rule">
        <field name="name">Loan: See All Records</field>
        <field name="model_id" ref="model_hr_loan"/>
        <field name="groups" eval="[(4, ref('loan_management.group_loan_management_manager'))]"/>
        <field name="domain_force">[(1, '=', 1)]</field>
    </record>

    <!--    Rule for Employee sees only their own requests-->
    <record id="loan_management.rule_request_loan_employee_own" model="ir.rule">
        <field name="name">Employee: Own Loan Requests</field>
        <field name="model_id" ref="model_request_hr_loan"/>
        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('loan_management.group_request_loan_employee'))]"/>
    </record>

    <!--Rule for Manager sees their subordinate employeesâ€™ requests-->
    <record id="loan_management.rule_request_loan_manager_subordinates" model="ir.rule">
        <field name="name">Manager: Subordinates Loan Requests</field>
        <field name="model_id" ref="model_request_hr_loan"/>
        <field name="domain_force">
            ['|',
            ('employee_id.user_id', '=', user.id),
            ('employee_id.parent_id.user_id', '=', user.id)
            ]
        </field>
        <field name="groups" eval="[(4, ref('loan_management.group_request_loan_manager'))]"/>
    </record>
    <!-- RULES -->


</odoo>