<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="hr_expense_extend.view_hr_expense_sheet_form" model="ir.ui.view">
        <field name="name">hr_expense_extend view_hr_expense_sheet_form</field>
        <field name="model">hr.expense.sheet</field>
        <field name="inherit_id" ref="hr_expense.view_hr_expense_sheet_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='state']" position="replace">
                <field name="state" widget="statusbar"
                       statusbar_visible="draft,submit,waiting_approvals,approve,post,done" force_save="1"
                       invisible="state == 'cancel'"/>
            </xpath>
            <xpath expr="//header" position="inside">
                <button name="approve_expense_request" string="Approve" type="object" class="btn-primary"
                        invisible="state != 'waiting_approvals'"/>
            </xpath>
            <xpath expr="//button[@name='action_refuse_expense_sheets']" position="attributes">
                <attribute name="invisible">state not in ('submit', 'waiting_approvals', 'approve')</attribute>
            </xpath>
            <xpath expr="//button[@name='action_reset_approval_expense_sheets']" position="attributes">
                <attribute name="invisible">not can_reset or state not in ('submit', 'waiting_approvals', 'cancel',
                    'approve')
                </attribute>
            </xpath>

            <xpath expr="//field[@name='accounting_date']" position="after">
                <field name="petty_cash_journal_id" force_save="1"/>
                <field name="petty_cash_limit" force_save="1"/>
            </xpath>
            <xpath expr="//page[@name='expenses']" position="after">
                <page id="approver_list" name="approver_list" string="Approver List">
                    <group>
                        <group>
                            <field name="config_name" force_save="1" readonly="1"/>
                            <field name="config_min_limit" force_save="1" readonly="1"/>
                        </group>
                        <group>
                            <field name="config_code" force_save="1" readonly="1"/>
                            <field name="config_max_limit" force_save="1" readonly="1"/>
                        </group>
                    </group>
                    <field name="hr_expense_sheet_approver_line_ids">
                        <tree editable="bottom" create="0" delete="0">
                            <field name="approver_id" force_save="1"/>
                            <field name="is_approved" force_save="1" readonly="1"/>
                            <button name="schedule_activity_for_approver" type="object" string="Get Approval"/>
                        </tree>
                    </field>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
